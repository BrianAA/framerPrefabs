{"version":3,"sources":["../src/select.anatomy.ts","../src/select.collection.ts","../src/select.connect.ts","../src/select.dom.ts","../src/select.machine.ts"],"sourcesContent":["import { createAnatomy } from \"@zag-js/anatomy\"\n\nexport const anatomy = createAnatomy(\"select\").parts(\n  \"label\",\n  \"positioner\",\n  \"trigger\",\n  \"indicator\",\n  \"clearTrigger\",\n  \"item\",\n  \"itemText\",\n  \"itemIndicator\",\n  \"itemGroup\",\n  \"itemGroupLabel\",\n  \"content\",\n  \"root\",\n  \"control\",\n)\nexport const parts = anatomy.build()\n","import { Collection, type CollectionItem, type CollectionOptions } from \"@zag-js/collection\"\nimport { ref } from \"@zag-js/core\"\n\nexport const collection = <T extends CollectionItem>(options: CollectionOptions<T>): Collection<T> => {\n  return ref(new Collection(options))\n}\n\ncollection.empty = (): Collection<CollectionItem> => {\n  return ref(new Collection<CollectionItem>({ items: [] }))\n}\n","import { getEventKey, type EventKeyMap } from \"@zag-js/dom-event\"\nimport { ariaAttr, dataAttr, getByTypeahead, isEditableElement, isSelfEvent } from \"@zag-js/dom-query\"\nimport { getPlacementStyles } from \"@zag-js/popper\"\nimport type { NormalizeProps, PropTypes } from \"@zag-js/types\"\nimport { visuallyHiddenStyle } from \"@zag-js/visually-hidden\"\nimport { parts } from \"./select.anatomy\"\nimport { dom } from \"./select.dom\"\nimport type { CollectionItem, ItemProps, MachineApi, Send, State } from \"./select.types\"\n\nexport function connect<T extends PropTypes, V extends CollectionItem = CollectionItem>(\n  state: State,\n  send: Send,\n  normalize: NormalizeProps<T>,\n): MachineApi<T, V> {\n  const isDisabled = state.context.isDisabled\n  const isInvalid = state.context.invalid\n  const isReadOnly = state.context.readOnly\n  const isInteractive = state.context.isInteractive\n\n  const isOpen = state.hasTag(\"open\")\n  const isFocused = state.matches(\"focused\")\n\n  const highlightedItem = state.context.highlightedItem\n  const selectedItems = state.context.selectedItems\n  const isTypingAhead = state.context.isTypingAhead\n\n  function getItemState(props: ItemProps) {\n    const { item } = props\n    const disabled = state.context.collection.isItemDisabled(item)\n    const value = state.context.collection.itemToValue(item)\n    return {\n      value,\n      isDisabled: Boolean(disabled || isDisabled),\n      isHighlighted: state.context.highlightedValue === value,\n      isSelected: state.context.value.includes(value),\n    }\n  }\n\n  const popperStyles = getPlacementStyles({\n    ...state.context.positioning,\n    placement: state.context.currentPlacement,\n  })\n\n  return {\n    isOpen,\n    isFocused,\n    highlightedItem,\n    highlightedValue: state.context.highlightedValue,\n    selectedItems,\n    hasSelectedItems: state.context.hasSelectedItems,\n    value: state.context.value,\n    valueAsString: state.context.valueAsString,\n    collection: state.context.collection,\n    setCollection(collection) {\n      send({ type: \"COLLECTION.SET\", value: collection })\n    },\n    reposition(options = {}) {\n      send({ type: \"POSITIONING.SET\", options })\n    },\n    focus() {\n      dom.getTriggerEl(state.context)?.focus({ preventScroll: true })\n    },\n    open() {\n      send(\"OPEN\")\n    },\n    close() {\n      send(\"CLOSE\")\n    },\n    selectValue(value) {\n      send({ type: \"ITEM.SELECT\", value })\n    },\n    setValue(value) {\n      send({ type: \"VALUE.SET\", value })\n    },\n    highlightValue(value) {\n      send({ type: \"HIGHLIGHTED_VALUE.SET\", value })\n    },\n    clearValue(value) {\n      if (value) {\n        send({ type: \"ITEM.CLEAR\", value })\n      } else {\n        send({ type: \"VALUE.CLEAR\" })\n      }\n    },\n\n    getItemState,\n\n    rootProps: normalize.element({\n      ...parts.root.attrs,\n      dir: state.context.dir,\n      id: dom.getRootId(state.context),\n      \"data-invalid\": dataAttr(isInvalid),\n      \"data-readonly\": dataAttr(isReadOnly),\n    }),\n\n    labelProps: normalize.label({\n      dir: state.context.dir,\n      id: dom.getLabelId(state.context),\n      ...parts.label.attrs,\n      \"data-disabled\": dataAttr(isDisabled),\n      \"data-invalid\": dataAttr(isInvalid),\n      \"data-readonly\": dataAttr(isReadOnly),\n      htmlFor: dom.getHiddenSelectId(state.context),\n      onClick() {\n        if (isDisabled) return\n        dom.getTriggerEl(state.context)?.focus({ preventScroll: true })\n      },\n    }),\n\n    controlProps: normalize.element({\n      ...parts.control.attrs,\n      dir: state.context.dir,\n      id: dom.getControlId(state.context),\n      \"data-state\": isOpen ? \"open\" : \"closed\",\n      \"data-focus\": dataAttr(isFocused),\n      \"data-disabled\": dataAttr(isDisabled),\n      \"data-invalid\": dataAttr(isInvalid),\n    }),\n\n    triggerProps: normalize.button({\n      id: dom.getTriggerId(state.context),\n      disabled: isDisabled,\n      dir: state.context.dir,\n      type: \"button\",\n      \"aria-controls\": dom.getContentId(state.context),\n      \"aria-expanded\": isOpen,\n      \"data-state\": isOpen ? \"open\" : \"closed\",\n      \"aria-haspopup\": \"listbox\",\n      \"aria-labelledby\": dom.getLabelId(state.context),\n      ...parts.trigger.attrs,\n      \"data-disabled\": dataAttr(isDisabled),\n      \"data-invalid\": dataAttr(isInvalid),\n      \"aria-invalid\": isInvalid,\n      \"data-readonly\": dataAttr(isReadOnly),\n      \"data-placement\": state.context.currentPlacement,\n      \"data-placeholder-shown\": dataAttr(!state.context.hasSelectedItems),\n      onPointerDown(event) {\n        if (event.button || event.ctrlKey || !isInteractive) return\n        event.currentTarget.dataset.pointerType = event.pointerType\n        if (isDisabled || event.pointerType === \"touch\") return\n        send({ type: \"TRIGGER.CLICK\" })\n      },\n      onClick(event) {\n        if (!isInteractive || event.button) return\n        if (event.currentTarget.dataset.pointerType === \"touch\") {\n          send({ type: \"TRIGGER.CLICK\" })\n        }\n      },\n      onFocus() {\n        send(\"TRIGGER.FOCUS\")\n      },\n      onBlur() {\n        send(\"TRIGGER.BLUR\")\n      },\n      onKeyDown(event) {\n        if (!isInteractive) return\n        const keyMap: EventKeyMap = {\n          ArrowUp() {\n            send({ type: \"TRIGGER.ARROW_UP\" })\n          },\n          ArrowDown(event) {\n            send({ type: event.altKey ? \"OPEN\" : \"TRIGGER.ARROW_DOWN\" })\n          },\n          ArrowLeft() {\n            send({ type: \"TRIGGER.ARROW_LEFT\" })\n          },\n          ArrowRight() {\n            send({ type: \"TRIGGER.ARROW_RIGHT\" })\n          },\n          Home() {\n            send({ type: \"TRIGGER.HOME\" })\n          },\n          End() {\n            send({ type: \"TRIGGER.END\" })\n          },\n          Enter() {\n            send({ type: \"TRIGGER.ENTER\" })\n          },\n          Space(event) {\n            if (isTypingAhead) {\n              send({ type: \"TRIGGER.TYPEAHEAD\", key: event.key })\n            } else {\n              send({ type: \"TRIGGER.ENTER\" })\n            }\n          },\n        }\n\n        const exec = keyMap[getEventKey(event, state.context)]\n\n        if (exec) {\n          exec(event)\n          event.preventDefault()\n          return\n        }\n\n        if (getByTypeahead.isValidEvent(event)) {\n          send({ type: \"TRIGGER.TYPEAHEAD\", key: event.key })\n          event.preventDefault()\n        }\n      },\n    }),\n\n    indicatorProps: normalize.element({\n      ...parts.indicator.attrs,\n      dir: state.context.dir,\n      \"aria-hidden\": true,\n      \"data-state\": isOpen ? \"open\" : \"closed\",\n    }),\n\n    getItemProps(props) {\n      const itemState = getItemState(props)\n\n      return normalize.element({\n        id: dom.getItemId(state.context, itemState.value),\n        role: \"option\",\n        ...parts.item.attrs,\n        dir: state.context.dir,\n        \"data-value\": itemState.value,\n        \"aria-selected\": itemState.isSelected,\n        \"data-state\": itemState.isSelected ? \"checked\" : \"unchecked\",\n        \"data-highlighted\": dataAttr(itemState.isHighlighted),\n        \"data-disabled\": dataAttr(itemState.isDisabled),\n        \"aria-disabled\": ariaAttr(itemState.isDisabled),\n        onPointerMove(event) {\n          if (itemState.isDisabled || event.pointerType !== \"mouse\") return\n          if (itemState.value === state.context.highlightedValue) return\n          send({ type: \"ITEM.POINTER_MOVE\", value: itemState.value })\n        },\n        onPointerUp() {\n          if (itemState.isDisabled) return\n          send({ type: \"ITEM.CLICK\", src: \"pointerup\", value: itemState.value })\n        },\n        onPointerLeave(event) {\n          const isKeyboardNavigationEvent = [\"CONTENT.ARROW_UP\", \"CONTENT.ARROW_DOWN\"].includes(state.event.type)\n\n          if (itemState.isDisabled || event.pointerType !== \"mouse\" || isKeyboardNavigationEvent) return\n\n          send({ type: \"ITEM.POINTER_LEAVE\" })\n        },\n      })\n    },\n\n    getItemTextProps(props) {\n      const itemState = getItemState(props)\n      return normalize.element({\n        ...parts.itemText.attrs,\n        dir: state.context.dir,\n        \"data-disabled\": dataAttr(itemState.isDisabled),\n        \"data-highlighted\": dataAttr(itemState.isHighlighted),\n      })\n    },\n\n    getItemIndicatorProps(props) {\n      const itemState = getItemState(props)\n      return normalize.element({\n        \"aria-hidden\": true,\n        ...parts.itemIndicator.attrs,\n        dir: state.context.dir,\n        \"data-state\": itemState.isSelected ? \"checked\" : \"unchecked\",\n        hidden: !itemState.isSelected,\n      })\n    },\n\n    getItemGroupLabelProps(props) {\n      const { htmlFor } = props\n      return normalize.element({\n        ...parts.itemGroupLabel.attrs,\n        id: dom.getItemGroupId(state.context, htmlFor),\n        role: \"group\",\n        dir: state.context.dir,\n      })\n    },\n\n    getItemGroupProps(props) {\n      const { id } = props\n      return normalize.element({\n        ...parts.itemGroup.attrs,\n        \"data-disabled\": dataAttr(isDisabled),\n        id: dom.getItemGroupId(state.context, id),\n        \"aria-labelledby\": dom.getItemGroupLabelId(state.context, id),\n        dir: state.context.dir,\n      })\n    },\n\n    clearTriggerProps: normalize.button({\n      ...parts.clearTrigger.attrs,\n      id: dom.getClearTriggerId(state.context),\n      type: \"button\",\n      \"aria-label\": \"Clear value\",\n      disabled: isDisabled,\n      hidden: !state.context.hasSelectedItems,\n      dir: state.context.dir,\n      onClick() {\n        send(\"VALUE.CLEAR\")\n      },\n    }),\n\n    hiddenSelectProps: normalize.select({\n      name: state.context.name,\n      form: state.context.form,\n      disabled: !isInteractive,\n      multiple: state.context.multiple,\n      \"aria-hidden\": true,\n      id: dom.getHiddenSelectId(state.context),\n      // defaultValue: state.context.selectedOption?.value,\n      style: visuallyHiddenStyle,\n      tabIndex: -1,\n      // Some browser extensions will focus the hidden select.\n      // Let's forward the focus to the trigger.\n      onFocus() {\n        dom.getTriggerEl(state.context)?.focus({ preventScroll: true })\n      },\n      \"aria-labelledby\": dom.getLabelId(state.context),\n    }),\n\n    positionerProps: normalize.element({\n      ...parts.positioner.attrs,\n      dir: state.context.dir,\n      id: dom.getPositionerId(state.context),\n      style: popperStyles.floating,\n    }),\n\n    contentProps: normalize.element({\n      hidden: !isOpen,\n      dir: state.context.dir,\n      id: dom.getContentId(state.context),\n      role: \"listbox\",\n      ...parts.content.attrs,\n      \"data-state\": isOpen ? \"open\" : \"closed\",\n      \"aria-activedescendant\": state.context.highlightedValue || \"\",\n      \"aria-multiselectable\": state.context.multiple ? \"true\" : undefined,\n      \"aria-labelledby\": dom.getLabelId(state.context),\n      tabIndex: 0,\n      onKeyDown(event) {\n        if (!isInteractive || !isSelfEvent(event)) return\n\n        const keyMap: EventKeyMap = {\n          ArrowUp() {\n            send({ type: \"CONTENT.ARROW_UP\" })\n          },\n          ArrowDown() {\n            send({ type: \"CONTENT.ARROW_DOWN\" })\n          },\n          Home() {\n            send({ type: \"CONTENT.HOME\" })\n          },\n          End() {\n            send({ type: \"CONTENT.END\" })\n          },\n          Enter() {\n            send({ type: \"CONTENT.ENTER\" })\n          },\n          Space(event) {\n            if (isTypingAhead) {\n              send({ type: \"CONTENT.TYPEAHEAD\", key: event.key })\n            } else {\n              keyMap.Enter?.(event)\n            }\n          },\n        }\n\n        const exec = keyMap[getEventKey(event)]\n\n        if (exec) {\n          exec(event)\n          event.preventDefault()\n          return\n        }\n\n        if (isEditableElement(event.target)) {\n          return\n        }\n\n        if (getByTypeahead.isValidEvent(event)) {\n          send({ type: \"CONTENT.TYPEAHEAD\", key: event.key })\n          event.preventDefault()\n        }\n      },\n    }),\n  }\n}\n","import { createScope } from \"@zag-js/dom-query\"\nimport type { MachineContext as Ctx } from \"./select.types\"\n\nexport const dom = createScope({\n  getRootId: (ctx: Ctx) => ctx.ids?.root ?? `select:${ctx.id}`,\n  getContentId: (ctx: Ctx) => ctx.ids?.content ?? `select:${ctx.id}:content`,\n  getTriggerId: (ctx: Ctx) => ctx.ids?.trigger ?? `select:${ctx.id}:trigger`,\n  getClearTriggerId: (ctx: Ctx) => ctx.ids?.clearTrigger ?? `select:${ctx.id}:clear-trigger`,\n  getLabelId: (ctx: Ctx) => ctx.ids?.label ?? `select:${ctx.id}:label`,\n  getControlId: (ctx: Ctx) => ctx.ids?.control ?? `select:${ctx.id}:control`,\n  getItemId: (ctx: Ctx, id: string | number) => ctx.ids?.item?.(id) ?? `select:${ctx.id}:option:${id}`,\n  getHiddenSelectId: (ctx: Ctx) => ctx.ids?.hiddenSelect ?? `select:${ctx.id}:select`,\n  getPositionerId: (ctx: Ctx) => ctx.ids?.positioner ?? `select:${ctx.id}:positioner`,\n  getItemGroupId: (ctx: Ctx, id: string | number) => ctx.ids?.itemGroup?.(id) ?? `select:${ctx.id}:optgroup:${id}`,\n  getItemGroupLabelId: (ctx: Ctx, id: string | number) =>\n    ctx.ids?.itemGroupLabel?.(id) ?? `select:${ctx.id}:optgroup-label:${id}`,\n\n  getHiddenSelectEl: (ctx: Ctx) => dom.getById(ctx, dom.getHiddenSelectId(ctx)),\n  getContentEl: (ctx: Ctx) => dom.getById(ctx, dom.getContentId(ctx)),\n  getControlEl: (ctx: Ctx) => dom.getById(ctx, dom.getControlId(ctx)),\n  getTriggerEl: (ctx: Ctx) => dom.getById(ctx, dom.getTriggerId(ctx)),\n  getClearTriggerEl: (ctx: Ctx) => dom.getById(ctx, dom.getClearTriggerId(ctx)),\n  getPositionerEl: (ctx: Ctx) => dom.getById(ctx, dom.getPositionerId(ctx)),\n  getHighlightedOptionEl(ctx: Ctx) {\n    if (!ctx.highlightedValue) return null\n    return dom.getById(ctx, dom.getItemId(ctx, ctx.highlightedValue))\n  },\n})\n","import { createMachine, guards } from \"@zag-js/core\"\nimport { trackDismissableElement } from \"@zag-js/dismissable\"\nimport { getByTypeahead, raf } from \"@zag-js/dom-query\"\nimport { setElementValue, trackFormControl } from \"@zag-js/form-utils\"\nimport { observeAttributes } from \"@zag-js/mutation-observer\"\nimport { getPlacement } from \"@zag-js/popper\"\nimport { proxyTabFocus } from \"@zag-js/tabbable\"\nimport { addOrRemove, compact, isEqual } from \"@zag-js/utils\"\nimport { collection } from \"./select.collection\"\nimport { dom } from \"./select.dom\"\nimport type { CollectionItem, MachineContext, MachineState, UserDefinedContext } from \"./select.types\"\n\nconst { and, not } = guards\n\nexport function machine<T extends CollectionItem>(userContext: UserDefinedContext<T>) {\n  const ctx = compact(userContext)\n  return createMachine<MachineContext, MachineState>(\n    {\n      id: \"select\",\n      context: {\n        value: [],\n        highlightedValue: null,\n        selectOnBlur: false,\n        loop: false,\n        closeOnSelect: true,\n        disabled: false,\n        ...ctx,\n        collection: ctx.collection ?? collection.empty(),\n        typeahead: getByTypeahead.defaultOptions,\n        fieldsetDisabled: false,\n        positioning: {\n          placement: \"bottom-start\",\n          gutter: 8,\n          ...ctx.positioning,\n        },\n      },\n\n      computed: {\n        hasSelectedItems: (ctx) => ctx.value.length > 0,\n        isTypingAhead: (ctx) => ctx.typeahead.keysSoFar !== \"\",\n        isDisabled: (ctx) => !!ctx.disabled || ctx.fieldsetDisabled,\n        isInteractive: (ctx) => !(ctx.isDisabled || ctx.readOnly),\n        selectedItems: (ctx) => ctx.collection.items(ctx.value),\n        highlightedItem: (ctx) => ctx.collection.item(ctx.highlightedValue),\n        valueAsString: (ctx) => ctx.collection.itemsToString(ctx.selectedItems),\n      },\n\n      initial: \"idle\",\n\n      watch: {\n        open: [\"toggleVisibility\"],\n        value: [\"syncSelectElement\"],\n      },\n\n      on: {\n        \"HIGHLIGHTED_VALUE.SET\": {\n          actions: [\"setHighlightedItem\"],\n        },\n        \"ITEM.SELECT\": {\n          actions: [\"selectItem\"],\n        },\n        \"ITEM.CLEAR\": {\n          actions: [\"clearItem\"],\n        },\n        \"VALUE.SET\": {\n          actions: [\"setSelectedItems\"],\n        },\n        \"VALUE.CLEAR\": {\n          actions: [\"clearSelectedItems\"],\n        },\n        \"COLLECTION.SET\": {\n          actions: [\"setCollection\"],\n        },\n        \"POSITIONING.SET\": {\n          actions: [\"reposition\"],\n        },\n      },\n\n      activities: [\"trackFormControlState\"],\n\n      states: {\n        idle: {\n          tags: [\"closed\"],\n          on: {\n            \"TRIGGER.CLICK\": {\n              target: \"open\",\n              actions: [\"invokeOnOpen\", \"highlightFirstSelectedItem\"],\n            },\n            \"TRIGGER.FOCUS\": {\n              target: \"focused\",\n            },\n            OPEN: {\n              target: \"open\",\n              actions: [\"invokeOnOpen\"],\n            },\n          },\n        },\n\n        focused: {\n          tags: [\"closed\"],\n          entry: [\"focusTriggerEl\"],\n          on: {\n            OPEN: {\n              target: \"open\",\n              actions: [\"invokeOnOpen\"],\n            },\n            \"TRIGGER.BLUR\": {\n              target: \"idle\",\n            },\n            \"TRIGGER.CLICK\": {\n              target: \"open\",\n              actions: [\"invokeOnOpen\", \"highlightFirstSelectedItem\"],\n            },\n            \"TRIGGER.ENTER\": [\n              {\n                guard: \"hasSelectedItems\",\n                target: \"open\",\n                actions: [\"highlightFirstSelectedItem\", \"invokeOnOpen\"],\n              },\n              {\n                target: \"open\",\n                actions: [\"highlightFirstItem\", \"invokeOnOpen\"],\n              },\n            ],\n            \"TRIGGER.ARROW_UP\": [\n              {\n                guard: \"hasSelectedItems\",\n                target: \"open\",\n                actions: [\"highlightFirstSelectedItem\", \"invokeOnOpen\"],\n              },\n              {\n                target: \"open\",\n                actions: [\"highlightLastItem\", \"invokeOnOpen\"],\n              },\n            ],\n            \"TRIGGER.ARROW_DOWN\": [\n              {\n                guard: \"hasSelectedItems\",\n                target: \"open\",\n                actions: [\"highlightFirstSelectedItem\", \"invokeOnOpen\"],\n              },\n              {\n                target: \"open\",\n                actions: [\"highlightFirstItem\", \"invokeOnOpen\"],\n              },\n            ],\n            \"TRIGGER.ARROW_LEFT\": [\n              {\n                guard: and(not(\"multiple\"), \"hasSelectedItems\"),\n                actions: [\"selectPreviousItem\"],\n              },\n              {\n                guard: not(\"multiple\"),\n                actions: [\"selectLastItem\"],\n              },\n            ],\n            \"TRIGGER.ARROW_RIGHT\": [\n              {\n                guard: and(not(\"multiple\"), \"hasSelectedItems\"),\n                actions: [\"selectNextItem\"],\n              },\n              {\n                guard: not(\"multiple\"),\n                actions: [\"selectFirstItem\"],\n              },\n            ],\n            \"TRIGGER.HOME\": {\n              guard: not(\"multiple\"),\n              actions: [\"selectFirstItem\"],\n            },\n            \"TRIGGER.END\": {\n              guard: not(\"multiple\"),\n              actions: [\"selectLastItem\"],\n            },\n            \"TRIGGER.TYPEAHEAD\": {\n              guard: not(\"multiple\"),\n              actions: [\"selectMatchingItem\"],\n            },\n          },\n        },\n\n        open: {\n          tags: [\"open\"],\n          entry: [\"focusContentEl\"],\n          exit: [\"scrollContentToTop\"],\n          activities: [\"trackDismissableElement\", \"computePlacement\", \"scrollToHighlightedItem\", \"proxyTabFocus\"],\n          on: {\n            CLOSE: {\n              target: \"focused\",\n              actions: [\"clearHighlightedItem\", \"invokeOnClose\"],\n            },\n            \"TRIGGER.CLICK\": {\n              target: \"focused\",\n              actions: [\"clearHighlightedItem\", \"invokeOnClose\"],\n            },\n            \"ITEM.CLICK\": [\n              {\n                guard: \"closeOnSelect\",\n                target: \"focused\",\n                actions: [\"selectHighlightedItem\", \"clearHighlightedItem\", \"invokeOnClose\"],\n              },\n              {\n                guard: \"multiple\",\n                actions: [\"selectHighlightedItem\"],\n              },\n              {\n                actions: [\"selectHighlightedItem\", \"clearHighlightedItem\"],\n              },\n            ],\n            \"CONTENT.ENTER\": [\n              {\n                guard: \"closeOnSelect\",\n                target: \"focused\",\n                actions: [\"selectHighlightedItem\", \"clearHighlightedItem\", \"invokeOnClose\"],\n              },\n              {\n                guard: \"multiple\",\n                actions: [\"selectHighlightedItem\"],\n              },\n              {\n                actions: [\"selectHighlightedItem\", \"clearHighlightedItem\"],\n              },\n            ],\n            \"CONTENT.INTERACT_OUTSIDE\": [\n              {\n                guard: and(\"selectOnBlur\", \"hasHighlightedItem\"),\n                target: \"idle\",\n                actions: [\"selectHighlightedItem\", \"invokeOnClose\", \"clearHighlightedItem\"],\n              },\n              {\n                guard: \"isTargetFocusable\",\n                target: \"idle\",\n                actions: [\"clearHighlightedItem\", \"invokeOnClose\"],\n              },\n              {\n                target: \"focused\",\n                actions: [\"clearHighlightedItem\", \"invokeOnClose\"],\n              },\n            ],\n            \"CONTENT.HOME\": {\n              actions: [\"highlightFirstItem\"],\n            },\n            \"CONTENT.END\": {\n              actions: [\"highlightLastItem\"],\n            },\n            \"CONTENT.ARROW_DOWN\": [\n              {\n                guard: and(\"hasHighlightedItem\", \"loop\", \"isLastItemHighlighted\"),\n                actions: [\"highlightFirstItem\"],\n              },\n              {\n                guard: \"hasHighlightedItem\",\n                actions: [\"highlightNextItem\"],\n              },\n              {\n                actions: [\"highlightFirstItem\"],\n              },\n            ],\n            \"CONTENT.ARROW_UP\": [\n              {\n                guard: and(\"hasHighlightedItem\", \"loop\", \"isFirstItemHighlighted\"),\n                actions: [\"highlightLastItem\"],\n              },\n              {\n                guard: \"hasHighlightedItem\",\n                actions: [\"highlightPreviousItem\"],\n              },\n              {\n                actions: [\"highlightLastItem\"],\n              },\n            ],\n            \"CONTENT.TYPEAHEAD\": {\n              actions: [\"highlightMatchingItem\"],\n            },\n            \"ITEM.POINTER_MOVE\": {\n              actions: [\"highlightItem\"],\n            },\n            \"ITEM.POINTER_LEAVE\": {\n              actions: [\"clearHighlightedItem\"],\n            },\n          },\n        },\n      },\n    },\n    {\n      guards: {\n        loop: (ctx) => !!ctx.loop,\n        multiple: (ctx) => !!ctx.multiple,\n        hasSelectedItems: (ctx) => ctx.hasSelectedItems,\n        hasHighlightedItem: (ctx) => ctx.highlightedValue != null,\n        isFirstItemHighlighted: (ctx) => ctx.highlightedValue === ctx.collection.first(),\n        isLastItemHighlighted: (ctx) => ctx.highlightedValue === ctx.collection.last(),\n        selectOnBlur: (ctx) => !!ctx.selectOnBlur,\n        closeOnSelect: (ctx, evt) => {\n          if (ctx.multiple) return false\n          return !!(evt.closeOnSelect ?? ctx.closeOnSelect)\n        },\n        isTargetFocusable: (_ctx, evt) => !!evt.focusable,\n      },\n      activities: {\n        proxyTabFocus(ctx) {\n          const contentEl = () => dom.getContentEl(ctx)\n          return proxyTabFocus(contentEl, {\n            defer: true,\n            triggerElement: dom.getTriggerEl(ctx),\n            onFocus(el) {\n              raf(() => el.focus({ preventScroll: true }))\n            },\n          })\n        },\n        trackFormControlState(ctx, _evt, { initialContext }) {\n          return trackFormControl(dom.getHiddenSelectEl(ctx), {\n            onFieldsetDisabledChange(disabled) {\n              ctx.fieldsetDisabled = disabled\n            },\n            onFormReset() {\n              set.selectedItems(ctx, initialContext.value)\n            },\n          })\n        },\n        trackDismissableElement(ctx, _evt, { send }) {\n          let focusable = false\n          const contentEl = () => dom.getContentEl(ctx)\n          return trackDismissableElement(contentEl, {\n            defer: true,\n            exclude: [dom.getTriggerEl(ctx), dom.getClearTriggerEl(ctx)],\n            onFocusOutside: ctx.onFocusOutside,\n            onPointerDownOutside: ctx.onPointerDownOutside,\n            onInteractOutside(event) {\n              focusable = event.detail.focusable\n              ctx.onInteractOutside?.(event)\n            },\n            onDismiss() {\n              send({ type: \"CONTENT.INTERACT_OUTSIDE\", focusable })\n            },\n          })\n        },\n        computePlacement(ctx) {\n          ctx.currentPlacement = ctx.positioning.placement\n          const triggerEl = () => dom.getTriggerEl(ctx)\n          const positionerEl = () => dom.getPositionerEl(ctx)\n          return getPlacement(triggerEl, positionerEl, {\n            defer: true,\n            ...ctx.positioning,\n            onComplete(data) {\n              ctx.currentPlacement = data.placement\n            },\n          })\n        },\n        scrollToHighlightedItem(ctx, _evt, { getState }) {\n          const exec = () => {\n            const state = getState()\n            // don't scroll into view if we're using the pointer\n            if (state.event.type.startsWith(\"ITEM.POINTER\")) return\n            const optionEl = dom.getHighlightedOptionEl(ctx)\n            optionEl?.scrollIntoView({ block: \"nearest\" })\n          }\n          raf(() => exec())\n          return observeAttributes(dom.getContentEl(ctx), [\"aria-activedescendant\"], exec)\n        },\n      },\n      actions: {\n        reposition(ctx, evt) {\n          const positionerEl = () => dom.getPositionerEl(ctx)\n          getPlacement(dom.getTriggerEl(ctx), positionerEl, {\n            ...ctx.positioning,\n            ...evt.options,\n            defer: true,\n            listeners: false,\n            onComplete(data) {\n              ctx.currentPlacement = data.placement\n            },\n          })\n        },\n        toggleVisibility(ctx, _evt, { send }) {\n          send({ type: ctx.open ? \"OPEN\" : \"CLOSE\", src: \"controlled\" })\n        },\n        highlightPreviousItem(ctx) {\n          if (ctx.highlightedValue == null) return\n          const value = ctx.collection.prev(ctx.highlightedValue)\n          set.highlightedItem(ctx, value)\n        },\n        highlightNextItem(ctx) {\n          if (ctx.highlightedValue == null) return\n          const value = ctx.collection.next(ctx.highlightedValue)\n          set.highlightedItem(ctx, value)\n        },\n        highlightFirstItem(ctx) {\n          const value = ctx.collection.first()\n          set.highlightedItem(ctx, value)\n        },\n        highlightLastItem(ctx) {\n          const value = ctx.collection.last()\n          set.highlightedItem(ctx, value)\n        },\n        focusContentEl(ctx) {\n          raf(() => {\n            dom.getContentEl(ctx)?.focus({ preventScroll: true })\n          })\n        },\n        focusTriggerEl(ctx) {\n          raf(() => {\n            dom.getTriggerEl(ctx)?.focus({ preventScroll: true })\n          })\n        },\n        selectHighlightedItem(ctx, evt) {\n          const value = evt.value ?? ctx.highlightedValue\n          if (value == null) return\n          set.selectedItem(ctx, value)\n        },\n        highlightFirstSelectedItem(ctx) {\n          if (!ctx.hasSelectedItems) return\n          const [value] = ctx.collection.sort(ctx.value)\n          set.highlightedItem(ctx, value)\n        },\n        highlightItem(ctx, evt) {\n          set.highlightedItem(ctx, evt.value)\n        },\n        highlightMatchingItem(ctx, evt) {\n          const value = ctx.collection.search(evt.key, {\n            state: ctx.typeahead,\n            currentValue: ctx.highlightedValue,\n          })\n\n          if (value == null) return\n          set.highlightedItem(ctx, value)\n        },\n        setHighlightedItem(ctx, evt) {\n          set.highlightedItem(ctx, evt.value)\n        },\n        clearHighlightedItem(ctx) {\n          set.highlightedItem(ctx, null, true)\n        },\n        selectItem(ctx, evt) {\n          set.selectedItem(ctx, evt.value)\n        },\n        clearItem(ctx, evt) {\n          const value = ctx.value.filter((v) => v !== evt.value)\n          set.selectedItems(ctx, value)\n        },\n        setSelectedItems(ctx, evt) {\n          set.selectedItems(ctx, evt.value)\n        },\n        clearSelectedItems(ctx) {\n          set.selectedItems(ctx, [])\n        },\n        selectPreviousItem(ctx) {\n          const value = ctx.collection.prev(ctx.value[0])\n          set.selectedItem(ctx, value)\n        },\n        selectNextItem(ctx) {\n          const value = ctx.collection.next(ctx.value[0])\n          set.selectedItem(ctx, value)\n        },\n        selectFirstItem(ctx) {\n          const value = ctx.collection.first()\n          set.selectedItem(ctx, value)\n        },\n        selectLastItem(ctx) {\n          const value = ctx.collection.last()\n          set.selectedItem(ctx, value)\n        },\n        selectMatchingItem(ctx, evt) {\n          const value = ctx.collection.search(evt.key, {\n            state: ctx.typeahead,\n            currentValue: ctx.value[0],\n          })\n          if (value == null) return\n          set.selectedItem(ctx, value)\n        },\n        scrollContentToTop(ctx) {\n          dom.getContentEl(ctx)?.scrollTo(0, 0)\n        },\n        invokeOnOpen(ctx) {\n          ctx.onOpenChange?.({ open: true })\n        },\n        invokeOnClose(ctx) {\n          ctx.onOpenChange?.({ open: false })\n        },\n        syncSelectElement(ctx) {\n          const selectEl = dom.getHiddenSelectEl(ctx)\n          if (!selectEl) return\n          setElementValue(selectEl, ctx.value.join(\",\"), { type: \"HTMLSelectElement\" })\n        },\n        setCollection(ctx, evt) {\n          ctx.collection = evt.value\n        },\n      },\n    },\n  )\n}\n\nfunction dispatchChangeEvent(ctx: MachineContext) {\n  const node = dom.getHiddenSelectEl(ctx)\n  if (!node) return\n  const win = dom.getWin(ctx)\n  const changeEvent = new win.Event(\"change\", { bubbles: true })\n  node.dispatchEvent(changeEvent)\n}\n\nconst invoke = {\n  change: (ctx: MachineContext) => {\n    ctx.onValueChange?.({\n      value: Array.from(ctx.value),\n      items: ctx.selectedItems,\n    })\n    dispatchChangeEvent(ctx)\n  },\n  highlightChange: (ctx: MachineContext) => {\n    ctx.onHighlightChange?.({\n      highlightedValue: ctx.highlightedValue,\n      highlightedItem: ctx.highlightedItem,\n    })\n  },\n}\n\nconst set = {\n  selectedItem: (ctx: MachineContext, value: string | null | undefined, force = false) => {\n    if (isEqual(ctx.value, value)) return\n\n    if (value == null && !force) return\n\n    if (value == null && force) {\n      ctx.value = []\n      invoke.change(ctx)\n      return\n    }\n\n    const nextValue = ctx.multiple ? addOrRemove(ctx.value, value!) : [value!]\n    ctx.value = nextValue\n    invoke.change(ctx)\n  },\n  selectedItems: (ctx: MachineContext, value: string[]) => {\n    if (isEqual(ctx.value, value)) return\n\n    ctx.value = value\n    invoke.change(ctx)\n  },\n  highlightedItem: (ctx: MachineContext, value: string | null | undefined, force = false) => {\n    if (isEqual(ctx.highlightedValue, value)) return\n\n    if (value == null && !force) return\n    ctx.highlightedValue = value ?? null\n\n    invoke.highlightChange(ctx)\n  },\n}\n"],"mappings":"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","names":["collection","event","getByTypeahead","getByTypeahead","ctx"]}
{"version":3,"sources":["../src/tags-input.anatomy.ts","../src/tags-input.connect.ts","../src/tags-input.dom.ts","../src/tags-input.machine.ts"],"sourcesContent":["import { createAnatomy } from \"@zag-js/anatomy\"\n\nexport const anatomy = createAnatomy(\"tagsInput\").parts(\n  \"root\",\n  \"label\",\n  \"control\",\n  \"input\",\n  \"clearTrigger\",\n  \"item\",\n  \"itemInput\",\n  \"itemText\",\n  \"itemDeleteTrigger\",\n)\n\nexport const parts = anatomy.build()\n","import { type EventKeyMap, getEventKey, getNativeEvent } from \"@zag-js/dom-event\"\nimport { ariaAttr, dataAttr } from \"@zag-js/dom-query\"\nimport type { NormalizeProps, PropTypes } from \"@zag-js/types\"\nimport { parts } from \"./tags-input.anatomy\"\nimport { dom } from \"./tags-input.dom\"\nimport type { MachineApi, Send, State, ItemProps } from \"./tags-input.types\"\n\nexport function connect<T extends PropTypes>(state: State, send: Send, normalize: NormalizeProps<T>): MachineApi<T> {\n  const isInteractive = state.context.isInteractive\n  const isDisabled = state.context.isDisabled\n  const isReadOnly = state.context.readOnly\n  const isInvalid = state.context.invalid || state.context.isOverflowing\n\n  const translations = state.context.translations\n\n  const isInputFocused = state.hasTag(\"focused\")\n  const isEditingTag = state.matches(\"editing:tag\")\n  const isEmpty = state.context.count === 0\n\n  function getItemState(options: ItemProps) {\n    const id = dom.getItemId(state.context, options)\n    return {\n      id,\n      isEditing: isEditingTag && state.context.editedTagId === id,\n      isHighlighted: id === state.context.highlightedTagId,\n      isDisabled: options.disabled || isDisabled,\n    }\n  }\n\n  return {\n    isEmpty,\n    inputValue: state.context.trimmedInputValue,\n    value: state.context.value,\n    valueAsString: state.context.valueAsString,\n    count: state.context.count,\n    isAtMax: state.context.isAtMax,\n    setValue(value) {\n      send({ type: \"SET_VALUE\", value })\n    },\n    clearValue(id) {\n      if (id) {\n        send({ type: \"CLEAR_TAG\", id })\n      } else {\n        send(\"CLEAR_VALUE\")\n      }\n    },\n    addValue(value) {\n      send({ type: \"ADD_TAG\", value })\n    },\n    setValueAtIndex(index, value) {\n      send({ type: \"SET_VALUE_AT_INDEX\", index, value })\n    },\n    setInputValue(value) {\n      send({ type: \"SET_INPUT_VALUE\", value })\n    },\n    clearInputValue() {\n      send({ type: \"SET_INPUT_VALUE\", value: \"\" })\n    },\n    focus() {\n      dom.getInputEl(state.context)?.focus()\n    },\n    getItemState,\n\n    rootProps: normalize.element({\n      dir: state.context.dir,\n      ...parts.root.attrs,\n      \"data-invalid\": dataAttr(isInvalid),\n      \"data-readonly\": dataAttr(isReadOnly),\n      \"data-disabled\": dataAttr(isDisabled),\n      \"data-focus\": dataAttr(isInputFocused),\n      \"data-empty\": dataAttr(isEmpty),\n      id: dom.getRootId(state.context),\n      onPointerDown() {\n        if (!isInteractive) return\n        send(\"POINTER_DOWN\")\n      },\n    }),\n\n    labelProps: normalize.label({\n      ...parts.label.attrs,\n      \"data-disabled\": dataAttr(isDisabled),\n      \"data-invalid\": dataAttr(isInvalid),\n      \"data-readonly\": dataAttr(isReadOnly),\n      id: dom.getLabelId(state.context),\n      dir: state.context.dir,\n      htmlFor: dom.getInputId(state.context),\n    }),\n\n    controlProps: normalize.element({\n      id: dom.getControlId(state.context),\n      ...parts.control.attrs,\n      dir: state.context.dir,\n      tabIndex: isReadOnly ? 0 : undefined,\n      \"data-disabled\": dataAttr(isDisabled),\n      \"data-readonly\": dataAttr(isReadOnly),\n      \"data-invalid\": dataAttr(isInvalid),\n      \"data-focus\": dataAttr(isInputFocused),\n    }),\n\n    inputProps: normalize.input({\n      ...parts.input.attrs,\n      dir: state.context.dir,\n      \"data-invalid\": dataAttr(isInvalid),\n      \"aria-invalid\": ariaAttr(isInvalid),\n      \"data-readonly\": dataAttr(isReadOnly),\n      maxLength: state.context.maxLength,\n      id: dom.getInputId(state.context),\n      defaultValue: state.context.inputValue,\n      autoComplete: \"off\",\n      autoCorrect: \"off\",\n      autoCapitalize: \"none\",\n      disabled: isDisabled || isReadOnly,\n      onChange(event) {\n        const evt = getNativeEvent(event)\n\n        if (evt.inputType === \"insertFromPaste\") return\n        let value = event.target.value\n\n        if (value.endsWith(state.context.delimiter!)) {\n          send(\"DELIMITER_KEY\")\n        } else {\n          send({ type: \"TYPE\", value, key: evt.inputType })\n        }\n      },\n      onFocus() {\n        send(\"FOCUS\")\n      },\n      onPaste(event) {\n        const value = event.clipboardData.getData(\"text/plain\")\n        send({ type: \"PASTE\", value })\n      },\n      onKeyDown(event) {\n        const evt = getNativeEvent(event)\n        if (evt.isComposing) return\n\n        // handle composition when used as combobox\n        const target = event.currentTarget as HTMLElement\n        const isCombobox = target.getAttribute(\"role\") === \"combobox\"\n        const isExpanded = target.ariaExpanded === \"true\"\n\n        const keyMap: EventKeyMap = {\n          ArrowDown() {\n            send(\"ARROW_DOWN\")\n          },\n          ArrowLeft() {\n            if (isCombobox && isExpanded) return\n            send(\"ARROW_LEFT\")\n          },\n          ArrowRight() {\n            if (state.context.highlightedTagId) {\n              event.preventDefault()\n            }\n            if (isCombobox && isExpanded) return\n            send(\"ARROW_RIGHT\")\n          },\n          Escape(event) {\n            event.preventDefault()\n            send(\"ESCAPE\")\n          },\n          Backspace() {\n            send(\"BACKSPACE\")\n          },\n          Delete() {\n            send(\"DELETE\")\n          },\n          Enter(event) {\n            event.preventDefault()\n            send(\"ENTER\")\n          },\n        }\n\n        const key = getEventKey(event, state.context)\n        const exec = keyMap[key]\n\n        if (exec) {\n          exec(event)\n          return\n        }\n      },\n    }),\n\n    hiddenInputProps: normalize.input({\n      type: \"text\",\n      hidden: true,\n      name: state.context.name,\n      form: state.context.form,\n      id: dom.getHiddenInputId(state.context),\n      defaultValue: state.context.valueAsString,\n    }),\n\n    getItemProps(props) {\n      const itemState = getItemState(props)\n      return normalize.element({\n        ...parts.item.attrs,\n        id: itemState.id,\n        dir: state.context.dir,\n        hidden: itemState.isEditing,\n        \"data-value\": props.value,\n        \"data-disabled\": dataAttr(isDisabled),\n        \"data-highlighted\": dataAttr(itemState.isHighlighted),\n        onPointerDown(event) {\n          if (!isInteractive || itemState.isDisabled) return\n          event.preventDefault()\n          send({ type: \"POINTER_DOWN_TAG\", id: itemState.id })\n        },\n        onDoubleClick() {\n          if (!isInteractive || itemState.isDisabled) return\n          send({ type: \"DOUBLE_CLICK_TAG\", id: itemState.id })\n        },\n      })\n    },\n\n    getItemTextProps(props) {\n      const itemState = getItemState(props)\n      return normalize.element({\n        ...parts.itemText.attrs,\n        dir: state.context.dir,\n        \"data-disabled\": dataAttr(isDisabled),\n        \"data-highlighted\": dataAttr(itemState.isHighlighted),\n      })\n    },\n\n    getItemInputProps(props) {\n      const itemState = getItemState(props)\n      return normalize.input({\n        ...parts.itemInput.attrs,\n        dir: state.context.dir,\n        \"aria-label\": translations.tagEdited(props.value),\n        \"aria-hidden\": true,\n        disabled: isDisabled,\n        id: dom.getItemInputId(state.context, props),\n        tabIndex: -1,\n        hidden: !itemState.isEditing,\n        defaultValue: itemState.isEditing ? state.context.editedTagValue : \"\",\n        onChange(event) {\n          send({ type: \"TAG_INPUT_TYPE\", value: event.target.value })\n        },\n        onBlur(event) {\n          send({ type: \"TAG_INPUT_BLUR\", target: event.relatedTarget, id: itemState.id })\n        },\n        onKeyDown(event) {\n          const keyMap: EventKeyMap = {\n            Enter() {\n              send(\"TAG_INPUT_ENTER\")\n            },\n            Escape() {\n              send(\"TAG_INPUT_ESCAPE\")\n            },\n          }\n\n          const exec = keyMap[event.key]\n\n          if (exec) {\n            event.preventDefault()\n            exec(event)\n          }\n        },\n      })\n    },\n\n    getItemDeleteTriggerProps(props) {\n      const id = dom.getItemId(state.context, props)\n      return normalize.button({\n        ...parts.itemDeleteTrigger.attrs,\n        dir: state.context.dir,\n        id: dom.getItemDeleteTriggerId(state.context, props),\n        type: \"button\",\n        disabled: isDisabled,\n        \"aria-label\": translations.deleteTagTriggerLabel(props.value),\n        tabIndex: -1,\n        onPointerDown(event) {\n          if (!isInteractive) {\n            event.preventDefault()\n          }\n        },\n        onPointerMove(event) {\n          if (!isInteractive) return\n          dom.setHoverIntent(event.currentTarget)\n        },\n        onPointerLeave(event) {\n          if (!isInteractive) return\n          dom.clearHoverIntent(event.currentTarget)\n        },\n        onClick() {\n          if (!isInteractive) return\n          send({ type: \"CLEAR_TAG\", id })\n        },\n      })\n    },\n\n    clearTriggerProps: normalize.button({\n      ...parts.clearTrigger.attrs,\n      dir: state.context.dir,\n      id: dom.getClearTriggerId(state.context),\n      type: \"button\",\n      \"data-readonly\": dataAttr(isReadOnly),\n      disabled: isDisabled,\n      \"aria-label\": translations.clearTriggerLabel,\n      hidden: isEmpty,\n      onClick() {\n        if (!isInteractive) return\n        send(\"CLEAR_VALUE\")\n      },\n    }),\n  }\n}\n","import { createScope, indexOfId, nextById, prevById, queryAll } from \"@zag-js/dom-query\"\nimport { dispatchInputValueEvent } from \"@zag-js/form-utils\"\nimport type { MachineContext as Ctx, ItemProps } from \"./tags-input.types\"\n\nexport const dom = createScope({\n  getRootId: (ctx: Ctx) => ctx.ids?.root ?? `tags-input:${ctx.id}`,\n  getInputId: (ctx: Ctx) => ctx.ids?.input ?? `tags-input:${ctx.id}:input`,\n  getClearTriggerId: (ctx: Ctx) => ctx.ids?.clearBtn ?? `tags-input:${ctx.id}:clear-btn`,\n  getHiddenInputId: (ctx: Ctx) => `tags-input:${ctx.id}:hidden-input`,\n  getLabelId: (ctx: Ctx) => ctx.ids?.label ?? `tags-input:${ctx.id}:label`,\n  getControlId: (ctx: Ctx) => ctx.ids?.control ?? `tags-input:${ctx.id}:control`,\n  getItemId: (ctx: Ctx, opt: ItemProps) => ctx.ids?.item?.(opt) ?? `tags-input:${ctx.id}:tag:${opt.value}:${opt.index}`,\n  getItemDeleteTriggerId: (ctx: Ctx, opt: ItemProps) =>\n    ctx.ids?.itemDeleteTrigger?.(opt) ?? `${dom.getItemId(ctx, opt)}:delete-btn`,\n  getItemInputId: (ctx: Ctx, opt: ItemProps) => ctx.ids?.itemInput?.(opt) ?? `${dom.getItemId(ctx, opt)}:input`,\n  getEditInputId: (ctx: Ctx) => `${ctx.editedTagId}:input`,\n\n  getTagInputEl: (ctx: Ctx, opt: ItemProps) => dom.getById<HTMLInputElement>(ctx, dom.getItemInputId(ctx, opt)),\n  getRootEl: (ctx: Ctx) => dom.getById(ctx, dom.getRootId(ctx)),\n  getInputEl: (ctx: Ctx) => dom.getById<HTMLInputElement>(ctx, dom.getInputId(ctx)),\n  getHiddenInputEl: (ctx: Ctx) => dom.getById<HTMLInputElement>(ctx, dom.getHiddenInputId(ctx)),\n  getEditInputEl: (ctx: Ctx) => dom.getById<HTMLInputElement>(ctx, dom.getEditInputId(ctx)),\n  getTagElements: (ctx: Ctx) => queryAll(dom.getRootEl(ctx), `[data-part=item]:not([data-disabled])`),\n  getFirstEl: (ctx: Ctx) => dom.getTagElements(ctx)[0],\n  getLastEl: (ctx: Ctx) => dom.getTagElements(ctx)[dom.getTagElements(ctx).length - 1],\n  getPrevEl: (ctx: Ctx, id: string) => prevById(dom.getTagElements(ctx), id, false),\n  getNextEl: (ctx: Ctx, id: string) => nextById(dom.getTagElements(ctx), id, false),\n  getTagElAtIndex: (ctx: Ctx, index: number) => dom.getTagElements(ctx)[index],\n\n  getIndexOfId: (ctx: Ctx, id: string) => indexOfId(dom.getTagElements(ctx), id),\n  isInputFocused: (ctx: Ctx) => dom.getDoc(ctx).activeElement === dom.getInputEl(ctx),\n\n  getHighlightedTagValue: (ctx: Ctx) => {\n    if (!ctx.highlightedTagId) return null\n    const tagEl = dom.getById(ctx, ctx.highlightedTagId)\n    return tagEl?.dataset.value ?? null\n  },\n  setHoverIntent: (el: Element) => {\n    const tagEl = el.closest<HTMLElement>(\"[data-part=item]\")\n    if (!tagEl) return\n    tagEl.dataset.deleteIntent = \"\"\n  },\n  clearHoverIntent: (el: Element) => {\n    const tagEl = el.closest<HTMLElement>(\"[data-part=item]\")\n    if (!tagEl) return\n    delete tagEl.dataset.deleteIntent\n  },\n  dispatchInputEvent(ctx: Ctx) {\n    const inputEl = dom.getHiddenInputEl(ctx)\n    if (!inputEl) return\n    dispatchInputValueEvent(inputEl, { value: ctx.valueAsString })\n  },\n})\n","import { autoResizeInput } from \"@zag-js/auto-resize\"\nimport { createMachine, guards } from \"@zag-js/core\"\nimport { contains, raf } from \"@zag-js/dom-query\"\nimport { trackFormControl } from \"@zag-js/form-utils\"\nimport { trackInteractOutside } from \"@zag-js/interact-outside\"\nimport { createLiveRegion } from \"@zag-js/live-region\"\nimport { compact, isEqual, removeAt, warn } from \"@zag-js/utils\"\nimport { dom } from \"./tags-input.dom\"\nimport type { MachineContext, MachineState, UserDefinedContext } from \"./tags-input.types\"\n\nconst { and, not, or } = guards\n\nexport function machine(userContext: UserDefinedContext) {\n  const ctx = compact(userContext)\n  return createMachine<MachineContext, MachineState>(\n    {\n      id: \"tags-input\",\n      initial: ctx.autoFocus ? \"focused:input\" : \"idle\",\n      context: {\n        log: { current: null, prev: null },\n        inputValue: \"\",\n        editedTagValue: \"\",\n        editedTagId: null,\n        highlightedTagId: null,\n        value: [],\n        dir: \"ltr\",\n        max: Infinity,\n        liveRegion: null,\n        blurBehavior: undefined,\n        addOnPaste: false,\n        allowEditTag: true,\n        validate: () => true,\n        delimiter: \",\",\n        disabled: false,\n        ...ctx,\n        fieldsetDisabled: false,\n        translations: {\n          clearTriggerLabel: \"Clear all tags\",\n          deleteTagTriggerLabel: (value) => `Delete tag ${value}`,\n          tagAdded: (value) => `Added tag ${value}`,\n          tagsPasted: (values) => `Pasted ${values.length} tags`,\n          tagEdited: (value) => `Editing tag ${value}. Press enter to save or escape to cancel.`,\n          tagUpdated: (value) => `Tag update to ${value}`,\n          tagDeleted: (value) => `Tag ${value} deleted`,\n          tagSelected: (value) => `Tag ${value} selected. Press enter to edit, delete or backspace to remove.`,\n          ...ctx.translations,\n        },\n      },\n      computed: {\n        count: (ctx) => ctx.value.length,\n        valueAsString: (ctx) => JSON.stringify(ctx.value),\n        trimmedInputValue: (ctx) => ctx.inputValue.trim(),\n        isDisabled: (ctx) => !!ctx.disabled || ctx.fieldsetDisabled,\n        isInteractive: (ctx) => !(ctx.readOnly || ctx.isDisabled),\n        isAtMax: (ctx) => ctx.count === ctx.max,\n        isOverflowing: (ctx) => ctx.count > ctx.max,\n      },\n      watch: {\n        highlightedTagId: \"logHighlightedTag\",\n        isOverflowing: \"invokeOnInvalid\",\n        log: \"announceLog\",\n        inputValue: \"syncInputValue\",\n        editedTagValue: \"syncEditedTagInputValue\",\n      },\n\n      activities: [\"trackLiveRegion\", \"trackFormControlState\"],\n\n      exit: [\"clearLog\"],\n\n      on: {\n        DOUBLE_CLICK_TAG: {\n          internal: true,\n          guard: \"allowEditTag\",\n          target: \"editing:tag\",\n          actions: [\"setEditedId\", \"initializeEditedTagValue\"],\n        },\n        POINTER_DOWN_TAG: {\n          internal: true,\n          guard: not(\"isTagHighlighted\"),\n          target: \"navigating:tag\",\n          actions: [\"highlightTag\", \"focusInput\"],\n        },\n        SET_INPUT_VALUE: {\n          actions: [\"setInputValue\"],\n        },\n        SET_VALUE: {\n          actions: [\"setValue\"],\n        },\n        CLEAR_TAG: {\n          actions: [\"deleteTag\"],\n        },\n        SET_VALUE_AT_INDEX: {\n          actions: [\"setValueAtIndex\"],\n        },\n        CLEAR_VALUE: {\n          actions: [\"clearTags\", \"clearInputValue\", \"focusInput\"],\n        },\n        ADD_TAG: {\n          // (!isAtMax || allowOverflow) && !inputValueIsEmpty\n          guard: and(or(not(\"isAtMax\"), \"allowOverflow\"), not(\"isInputValueEmpty\")),\n          actions: [\"addTag\", \"clearInputValue\"],\n        },\n        EXTERNAL_BLUR: [\n          { guard: \"addOnBlur\", actions: \"raiseAddTagEvent\" },\n          { guard: \"clearOnBlur\", actions: \"clearInputValue\" },\n        ],\n      },\n\n      states: {\n        idle: {\n          on: {\n            FOCUS: \"focused:input\",\n            POINTER_DOWN: {\n              guard: not(\"hasHighlightedTag\"),\n              target: \"focused:input\",\n            },\n          },\n        },\n\n        \"focused:input\": {\n          tags: [\"focused\"],\n          entry: [\"focusInput\", \"clearHighlightedId\"],\n          activities: [\"trackInteractOutside\"],\n          on: {\n            TYPE: {\n              actions: \"setInputValue\",\n            },\n            BLUR: [\n              {\n                guard: \"addOnBlur\",\n                target: \"idle\",\n                actions: \"raiseAddTagEvent\",\n              },\n              {\n                guard: \"clearOnBlur\",\n                target: \"idle\",\n                actions: \"clearInputValue\",\n              },\n              { target: \"idle\" },\n            ],\n            ENTER: {\n              actions: [\"raiseAddTagEvent\"],\n            },\n            DELIMITER_KEY: {\n              actions: [\"raiseAddTagEvent\"],\n            },\n            ARROW_LEFT: {\n              guard: and(\"hasTags\", \"isInputCaretAtStart\"),\n              target: \"navigating:tag\",\n              actions: \"highlightLastTag\",\n            },\n            BACKSPACE: {\n              target: \"navigating:tag\",\n              guard: and(\"hasTags\", \"isInputCaretAtStart\"),\n              actions: \"highlightLastTag\",\n            },\n            PASTE: {\n              guard: \"addOnPaste\",\n              actions: [\"setInputValue\", \"addTagFromPaste\"],\n            },\n          },\n        },\n\n        \"navigating:tag\": {\n          tags: [\"focused\"],\n          activities: [\"trackInteractOutside\"],\n          on: {\n            ARROW_RIGHT: [\n              {\n                guard: and(\"hasTags\", \"isInputCaretAtStart\", not(\"isLastTagHighlighted\")),\n                actions: \"highlightNextTag\",\n              },\n              { target: \"focused:input\" },\n            ],\n            ARROW_LEFT: {\n              actions: \"highlightPrevTag\",\n            },\n            BLUR: {\n              target: \"idle\",\n              actions: \"clearHighlightedId\",\n            },\n            ENTER: {\n              guard: and(\"allowEditTag\", \"hasHighlightedTag\"),\n              target: \"editing:tag\",\n              actions: [\"setEditedId\", \"initializeEditedTagValue\", \"focusEditedTagInput\"],\n            },\n            ARROW_DOWN: \"focused:input\",\n            ESCAPE: \"focused:input\",\n            TYPE: {\n              target: \"focused:input\",\n              actions: \"setInputValue\",\n            },\n            BACKSPACE: [\n              {\n                guard: \"isFirstTagHighlighted\",\n                actions: [\"deleteHighlightedTag\", \"highlightFirstTag\"],\n              },\n              {\n                actions: [\"deleteHighlightedTag\", \"highlightPrevTag\"],\n              },\n            ],\n            DELETE: {\n              actions: [\"deleteHighlightedTag\", \"highlightTagAtIndex\"],\n            },\n          },\n        },\n\n        \"editing:tag\": {\n          tags: [\"editing\", \"focused\"],\n          entry: \"focusEditedTagInput\",\n          activities: [\"autoResize\"],\n          on: {\n            TAG_INPUT_TYPE: {\n              actions: \"setEditedTagValue\",\n            },\n            TAG_INPUT_ESCAPE: {\n              target: \"navigating:tag\",\n              actions: [\"clearEditedTagValue\", \"focusInput\", \"clearEditedId\", \"highlightTagAtIndex\"],\n            },\n            TAG_INPUT_BLUR: [\n              {\n                guard: \"isInputRelatedTarget\",\n                target: \"navigating:tag\",\n                actions: [\"clearEditedTagValue\", \"clearHighlightedId\", \"clearEditedId\"],\n              },\n              {\n                target: \"idle\",\n                actions: [\"clearEditedTagValue\", \"clearHighlightedId\", \"clearEditedId\", \"raiseExternalBlurEvent\"],\n              },\n            ],\n            TAG_INPUT_ENTER: {\n              target: \"navigating:tag\",\n              actions: [\"submitEditedTagValue\", \"focusInput\", \"clearEditedId\", \"highlightTagAtIndex\"],\n            },\n          },\n        },\n      },\n    },\n    {\n      guards: {\n        isInputRelatedTarget: (ctx, evt) => evt.relatedTarget === dom.getInputEl(ctx),\n        isAtMax: (ctx) => ctx.isAtMax,\n        hasHighlightedTag: (ctx) => ctx.highlightedTagId !== null,\n        isTagHighlighted: (ctx, evt) => ctx.highlightedTagId === evt.id,\n        isFirstTagHighlighted: (ctx) => dom.getFirstEl(ctx)?.id === ctx.highlightedTagId,\n        isLastTagHighlighted: (ctx) => dom.getLastEl(ctx)?.id === ctx.highlightedTagId,\n        isInputValueEmpty: (ctx) => ctx.trimmedInputValue.length === 0,\n        hasTags: (ctx) => ctx.value.length > 0,\n        allowOverflow: (ctx) => !!ctx.allowOverflow,\n        autoFocus: (ctx) => !!ctx.autoFocus,\n        addOnBlur: (ctx) => ctx.blurBehavior === \"add\",\n        clearOnBlur: (ctx) => ctx.blurBehavior === \"clear\",\n        addOnPaste: (ctx) => !!ctx.addOnPaste,\n        allowEditTag: (ctx) => !!ctx.allowEditTag,\n        isInputCaretAtStart(ctx) {\n          const input = dom.getInputEl(ctx)\n          if (!input) return false\n          try {\n            return input.selectionStart === 0 && input.selectionEnd === 0\n          } catch (e) {\n            return input.value === \"\"\n          }\n        },\n      },\n\n      activities: {\n        trackInteractOutside(ctx, _evt, { send }) {\n          return trackInteractOutside(dom.getInputEl(ctx), {\n            exclude(target) {\n              return contains(dom.getRootEl(ctx), target)\n            },\n            onFocusOutside: ctx.onFocusOutside,\n            onPointerDownOutside: ctx.onPointerDownOutside,\n            onInteractOutside(event) {\n              ctx.onInteractOutside?.(event)\n              if (event.defaultPrevented) return\n              send({ type: \"BLUR\", src: \"interact-outside\" })\n            },\n          })\n        },\n        trackFormControlState(ctx, _evt, { send, initialContext }) {\n          return trackFormControl(dom.getHiddenInputEl(ctx), {\n            onFieldsetDisabledChange(disabled) {\n              ctx.fieldsetDisabled = disabled\n            },\n            onFormReset() {\n              send({ type: \"SET_VALUE\", value: initialContext.value, src: \"form-reset\" })\n            },\n          })\n        },\n        autoResize(ctx) {\n          if (!ctx.editedTagValue || ctx.idx == null || !ctx.allowEditTag) return\n          const input = dom.getTagInputEl(ctx, { value: ctx.editedTagValue, index: ctx.idx })\n          return autoResizeInput(input)\n        },\n        trackLiveRegion(ctx) {\n          ctx.liveRegion = createLiveRegion({\n            level: \"assertive\",\n            document: dom.getDoc(ctx),\n          })\n          return () => ctx.liveRegion?.destroy()\n        },\n      },\n\n      actions: {\n        raiseAddTagEvent(_, __, { self }) {\n          self.send(\"ADD_TAG\")\n        },\n        raiseExternalBlurEvent(_, evt, { self }) {\n          self.send({ type: \"EXTERNAL_BLUR\", id: evt.id })\n        },\n        dispatchChangeEvent(ctx) {\n          dom.dispatchInputEvent(ctx)\n        },\n        highlightNextTag(ctx) {\n          if (ctx.highlightedTagId == null) return\n          const next = dom.getNextEl(ctx, ctx.highlightedTagId)\n          if (next == null) return\n          set.highlightedId(ctx, next.id)\n        },\n        highlightFirstTag(ctx) {\n          raf(() => {\n            const first = dom.getFirstEl(ctx)\n            if (first == null) return\n            set.highlightedId(ctx, first.id)\n          })\n        },\n        highlightLastTag(ctx) {\n          const last = dom.getLastEl(ctx)\n          if (last == null) return\n          set.highlightedId(ctx, last.id)\n        },\n        highlightPrevTag(ctx) {\n          if (ctx.highlightedTagId == null) return\n          const prev = dom.getPrevEl(ctx, ctx.highlightedTagId)\n          set.highlightedId(ctx, prev?.id || null)\n        },\n        highlightTag(ctx, evt) {\n          set.highlightedId(ctx, evt.id)\n        },\n        highlightTagAtIndex(ctx) {\n          raf(() => {\n            if (ctx.idx == null) return\n\n            const tagEl = dom.getTagElAtIndex(ctx, ctx.idx)\n            if (tagEl == null) return\n\n            set.highlightedId(ctx, tagEl.id)\n            ctx.idx = undefined\n          })\n        },\n        deleteTag(ctx, evt) {\n          const index = dom.getIndexOfId(ctx, evt.id)\n          const value = ctx.value[index]\n\n          // log\n          ctx.log.prev = ctx.log.current\n          ctx.log.current = { type: \"delete\", value }\n\n          set.value(ctx, removeAt(ctx.value, index))\n        },\n        deleteHighlightedTag(ctx) {\n          if (ctx.highlightedTagId == null) return\n          const index = dom.getIndexOfId(ctx, ctx.highlightedTagId)\n          ctx.idx = index\n          const value = ctx.value[index]\n\n          // log\n          ctx.log.prev = ctx.log.current\n          ctx.log.current = { type: \"delete\", value }\n\n          set.value(ctx, removeAt(ctx.value, index))\n        },\n        setEditedId(ctx, evt) {\n          ctx.editedTagId = evt.id ?? ctx.highlightedTagId\n          ctx.idx = dom.getIndexOfId(ctx, ctx.editedTagId!)\n        },\n        clearEditedId(ctx) {\n          ctx.editedTagId = null\n        },\n        clearEditedTagValue(ctx) {\n          ctx.editedTagValue = \"\"\n        },\n        setEditedTagValue(ctx, evt) {\n          ctx.editedTagValue = evt.value\n        },\n        submitEditedTagValue(ctx) {\n          if (!ctx.editedTagId) return\n\n          const index = dom.getIndexOfId(ctx, ctx.editedTagId)\n          set.valueAtIndex(ctx, index, ctx.editedTagValue ?? \"\")\n\n          // log\n          ctx.log.prev = ctx.log.current\n          ctx.log.current = { type: \"update\", value: ctx.editedTagValue! }\n        },\n        setValueAtIndex(ctx, evt) {\n          if (evt.value) {\n            ctx.value[evt.index] = evt.value\n            // log\n            ctx.log.prev = ctx.log.current\n            ctx.log.current = { type: \"update\", value: evt.value }\n          } else {\n            warn(\"You need to provide a value for the tag\")\n          }\n        },\n        initializeEditedTagValue(ctx) {\n          if (!ctx.editedTagId) return\n          const index = dom.getIndexOfId(ctx, ctx.editedTagId)\n          ctx.editedTagValue = ctx.value[index]\n        },\n        focusEditedTagInput(ctx) {\n          raf(() => {\n            dom.getEditInputEl(ctx)?.select()\n          })\n        },\n        setInputValue(ctx, evt) {\n          ctx.inputValue = evt.value\n        },\n        clearHighlightedId(ctx) {\n          ctx.highlightedTagId = null\n        },\n        focusInput(ctx) {\n          raf(() => {\n            dom.getInputEl(ctx)?.focus()\n          })\n        },\n        clearInputValue(ctx) {\n          ctx.inputValue = \"\"\n        },\n        syncInputValue(ctx) {\n          const inputEl = dom.getInputEl(ctx)\n          dom.setValue(inputEl, ctx.inputValue)\n        },\n        syncEditedTagInputValue(ctx, evt) {\n          const id = ctx.editedTagId || ctx.highlightedTagId || evt.id\n          if (id == null) return\n          const editTagInputEl = dom.getById<HTMLInputElement>(ctx, `${id}:input`)\n          dom.setValue(editTagInputEl, ctx.editedTagValue)\n        },\n        addTag(ctx, evt) {\n          const value = evt.value ?? ctx.trimmedInputValue\n          const guard = ctx.validate?.({ inputValue: value, value: Array.from(ctx.value) })\n          if (guard) {\n            set.value(ctx, ctx.value.concat(value))\n            // log\n            ctx.log.prev = ctx.log.current\n            ctx.log.current = { type: \"add\", value }\n          } else {\n            ctx.onValueInvalid?.({ reason: \"invalidTag\" })\n          }\n        },\n        addTagFromPaste(ctx) {\n          raf(() => {\n            const value = ctx.trimmedInputValue\n            const guard = ctx.validate?.({ inputValue: value, value: Array.from(ctx.value) })\n            if (guard) {\n              const trimmedValue = ctx.delimiter ? value.split(ctx.delimiter).map((v) => v.trim()) : [value]\n              set.value(ctx, ctx.value.concat(...trimmedValue))\n              // log\n              ctx.log.prev = ctx.log.current\n              ctx.log.current = { type: \"paste\", values: trimmedValue }\n            } else {\n              ctx.onValueInvalid?.({ reason: \"invalidTag\" })\n            }\n            ctx.inputValue = \"\"\n          })\n        },\n        clearTags(ctx) {\n          set.value(ctx, [])\n          // log\n          ctx.log.prev = ctx.log.current\n          ctx.log.current = { type: \"clear\" }\n        },\n        setValue(ctx, evt) {\n          set.value(ctx, evt.value)\n        },\n        invokeOnInvalid(ctx) {\n          if (ctx.isOverflowing) {\n            ctx.onValueInvalid?.({ reason: \"rangeOverflow\" })\n          }\n        },\n        clearLog(ctx) {\n          ctx.log = { prev: null, current: null }\n        },\n        logHighlightedTag(ctx) {\n          if (ctx.highlightedTagId == null) return\n          const index = dom.getIndexOfId(ctx, ctx.highlightedTagId)\n\n          // log\n          ctx.log.prev = ctx.log.current\n          ctx.log.current = { type: \"select\", value: ctx.value[index] }\n        },\n        // queue logs with screen reader and get it announced\n        announceLog(ctx) {\n          if (!ctx.log.current || ctx.liveRegion == null) return\n\n          const region = ctx.liveRegion\n          const { current, prev } = ctx.log\n          let msg: string | undefined\n\n          switch (current.type) {\n            case \"add\":\n              msg = ctx.translations.tagAdded(current.value)\n              break\n            case \"delete\":\n              msg = ctx.translations.tagDeleted(current.value)\n              break\n            case \"update\":\n              msg = ctx.translations.tagUpdated(current.value)\n              break\n            case \"paste\":\n              msg = ctx.translations.tagsPasted(current.values)\n              break\n            case \"select\":\n              msg = ctx.translations.tagSelected(current.value)\n              if (prev?.type === \"delete\") {\n                msg = `${ctx.translations.tagDeleted(prev.value)}. ${msg}`\n              } else if (prev?.type === \"update\") {\n                msg = `${ctx.translations.tagUpdated(prev.value)}. ${msg}`\n              }\n              break\n            default:\n              break\n          }\n\n          if (msg) region.announce(msg)\n        },\n      },\n    },\n  )\n}\n\nconst invoke = {\n  change: (ctx: MachineContext) => {\n    ctx.onValueChange?.({ value: Array.from(ctx.value) })\n    dom.dispatchInputEvent(ctx)\n  },\n  highlightChange: (ctx: MachineContext) => {\n    const highlightedValue = dom.getHighlightedTagValue(ctx)\n    ctx.onHighlightChange?.({ highlightedValue })\n  },\n}\n\nconst set = {\n  value: (ctx: MachineContext, value: string[]) => {\n    if (isEqual(ctx.value, value)) return\n    ctx.value = value\n    invoke.change(ctx)\n  },\n  valueAtIndex: (ctx: MachineContext, index: number, value: string) => {\n    if (isEqual(ctx.value[index], value)) return\n    ctx.value[index] = value\n    invoke.change(ctx)\n  },\n  highlightedId: (ctx: MachineContext, id: string | null) => {\n    if (isEqual(ctx.highlightedTagId, id)) return\n    ctx.highlightedTagId = id\n    invoke.highlightChange(ctx)\n  },\n}\n"],"mappings":"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","names":["event","ctx"]}
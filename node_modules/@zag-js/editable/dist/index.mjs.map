{"version":3,"sources":["../src/editable.anatomy.ts","../src/editable.connect.ts","../src/editable.dom.ts","../src/editable.machine.ts"],"sourcesContent":["import { createAnatomy } from \"@zag-js/anatomy\"\n\nexport const anatomy = createAnatomy(\"editable\").parts(\n  \"root\",\n  \"area\",\n  \"label\",\n  \"preview\",\n  \"input\",\n  \"editTrigger\",\n  \"submitTrigger\",\n  \"cancelTrigger\",\n  \"control\",\n)\nexport const parts = anatomy.build()\n","import type { EventKeyMap } from \"@zag-js/dom-event\"\nimport { ariaAttr, dataAttr } from \"@zag-js/dom-query\"\nimport type { NormalizeProps, PropTypes } from \"@zag-js/types\"\nimport { parts } from \"./editable.anatomy\"\nimport { dom } from \"./editable.dom\"\nimport type { MachineApi, Send, State } from \"./editable.types\"\n\nexport function connect<T extends PropTypes>(state: State, send: Send, normalize: NormalizeProps<T>): MachineApi<T> {\n  const isDisabled = state.context.disabled\n  const isInteractive = state.context.isInteractive\n  const isReadOnly = state.context.readOnly\n  const isValueEmpty = state.context.isValueEmpty\n  const isInvalid = state.context.invalid\n\n  const autoResize = state.context.autoResize\n  const translations = state.context.translations\n\n  const isEditing = state.matches(\"edit\")\n\n  const placeholderProp = state.context.placeholder\n  const placeholder =\n    typeof placeholderProp === \"string\" ? { edit: placeholderProp, preview: placeholderProp } : placeholderProp\n\n  return {\n    isEditing,\n    isValueEmpty: isValueEmpty,\n    value: state.context.value,\n    setValue(value) {\n      send({ type: \"SET_VALUE\", value })\n    },\n    clearValue() {\n      send({ type: \"SET_VALUE\", value: \"\" })\n    },\n    edit() {\n      if (!isInteractive) return\n      send(\"EDIT\")\n    },\n    cancel() {\n      if (!isInteractive) return\n      send(\"CANCEL\")\n    },\n    submit() {\n      if (!isInteractive) return\n      send(\"SUBMIT\")\n    },\n\n    rootProps: normalize.element({\n      ...parts.root.attrs,\n      id: dom.getRootId(state.context),\n      dir: state.context.dir,\n    }),\n\n    areaProps: normalize.element({\n      ...parts.area.attrs,\n      id: dom.getAreaId(state.context),\n      dir: state.context.dir,\n      style: autoResize ? { display: \"inline-grid\" } : undefined,\n      \"data-focus\": dataAttr(isEditing),\n      \"data-disabled\": dataAttr(isDisabled),\n      \"data-placeholder-shown\": dataAttr(isValueEmpty),\n    }),\n\n    labelProps: normalize.label({\n      ...parts.label.attrs,\n      id: dom.getLabelId(state.context),\n      dir: state.context.dir,\n      htmlFor: dom.getInputId(state.context),\n      \"data-focus\": dataAttr(isEditing),\n      \"data-invalid\": dataAttr(isInvalid),\n      onPointerDown(event) {\n        if (!isEditing) {\n          event.preventDefault()\n          dom.getPreviewEl(state.context)?.focus()\n        }\n      },\n    }),\n\n    inputProps: normalize.input({\n      ...parts.input.attrs,\n      dir: state.context.dir,\n      \"aria-label\": translations.input,\n      name: state.context.name,\n      form: state.context.form,\n      id: dom.getInputId(state.context),\n      hidden: autoResize ? undefined : !isEditing,\n      placeholder: placeholder?.edit,\n      disabled: isDisabled,\n      \"data-disabled\": dataAttr(isDisabled),\n      readOnly: isReadOnly,\n      \"data-readonly\": dataAttr(isReadOnly),\n      \"aria-invalid\": ariaAttr(isInvalid),\n      \"data-invalid\": dataAttr(isInvalid),\n      defaultValue: state.context.value,\n      size: autoResize ? 1 : undefined,\n      onChange(event) {\n        send({ type: \"TYPE\", value: event.currentTarget.value })\n      },\n      onKeyDown(event) {\n        const keyMap: EventKeyMap = {\n          Escape() {\n            send(\"CANCEL\")\n          },\n          Enter(event) {\n            if (!event.shiftKey && !event.metaKey) {\n              send(\"ENTER\")\n            }\n          },\n        }\n\n        const exec = keyMap[event.key]\n\n        if (exec) {\n          event.preventDefault()\n          exec(event)\n        }\n      },\n      style: autoResize\n        ? {\n            all: \"unset\",\n            gridArea: \"1 / 1 / auto / auto\",\n            visibility: !isEditing ? \"hidden\" : undefined,\n          }\n        : undefined,\n    }),\n\n    previewProps: normalize.element({\n      id: dom.getPreviewId(state.context),\n      ...parts.preview.attrs,\n      dir: state.context.dir,\n      \"data-placeholder-shown\": dataAttr(isValueEmpty),\n      \"aria-readonly\": ariaAttr(isReadOnly),\n      \"data-readonly\": dataAttr(isDisabled),\n      \"data-disabled\": dataAttr(isDisabled),\n      \"aria-disabled\": ariaAttr(isDisabled),\n      \"aria-invalid\": ariaAttr(isInvalid),\n      \"data-invalid\": dataAttr(isInvalid),\n      children: isValueEmpty ? placeholder?.preview : state.context.value,\n      hidden: autoResize ? undefined : isEditing,\n      tabIndex: isInteractive && state.context.isPreviewFocusable ? 0 : undefined,\n      onFocus() {\n        if (!isInteractive) return\n        send(\"FOCUS\")\n      },\n      onDoubleClick() {\n        if (!isInteractive) return\n        send(\"DBLCLICK\")\n      },\n      style: autoResize\n        ? {\n            whiteSpace: \"pre\",\n            userSelect: \"none\",\n            gridArea: \"1 / 1 / auto / auto\",\n            visibility: isEditing ? \"hidden\" : undefined,\n            // in event the preview overflow's the parent element\n            overflow: \"hidden\",\n            textOverflow: \"ellipsis\",\n          }\n        : undefined,\n    }),\n\n    editTriggerProps: normalize.button({\n      ...parts.editTrigger.attrs,\n      id: dom.getEditTriggerId(state.context),\n      dir: state.context.dir,\n      \"aria-label\": translations.edit,\n      hidden: isEditing,\n      type: \"button\",\n      disabled: isDisabled,\n      onClick() {\n        if (!isInteractive) return\n        send(\"EDIT\")\n      },\n    }),\n\n    controlProps: normalize.element({\n      id: dom.getControlId(state.context),\n      ...parts.control.attrs,\n      dir: state.context.dir,\n    }),\n\n    submitTriggerProps: normalize.button({\n      ...parts.submitTrigger.attrs,\n      dir: state.context.dir,\n      id: dom.getSubmitTriggerId(state.context),\n      \"aria-label\": translations.submit,\n      hidden: !isEditing,\n      disabled: isDisabled,\n      type: \"button\",\n      onClick() {\n        if (!isInteractive) return\n        send(\"SUBMIT\")\n      },\n    }),\n\n    cancelTriggerProps: normalize.button({\n      ...parts.cancelTrigger.attrs,\n      dir: state.context.dir,\n      \"aria-label\": translations.cancel,\n      id: dom.getCancelTriggerId(state.context),\n      hidden: !isEditing,\n      type: \"button\",\n      disabled: isDisabled,\n      onClick() {\n        if (!isInteractive) return\n        send(\"CANCEL\")\n      },\n    }),\n  }\n}\n","import { createScope } from \"@zag-js/dom-query\"\nimport type { MachineContext as Ctx } from \"./editable.types\"\n\nexport const dom = createScope({\n  getRootId: (ctx: Ctx) => ctx.ids?.root ?? `editable:${ctx.id}`,\n  getAreaId: (ctx: Ctx) => ctx.ids?.area ?? `editable:${ctx.id}:area`,\n  getLabelId: (ctx: Ctx) => ctx.ids?.label ?? `editable:${ctx.id}:label`,\n  getPreviewId: (ctx: Ctx) => ctx.ids?.preview ?? `editable:${ctx.id}:preview`,\n  getInputId: (ctx: Ctx) => ctx.ids?.input ?? `editable:${ctx.id}:input`,\n  getControlId: (ctx: Ctx) => ctx.ids?.controls ?? `editable:${ctx.id}:controls`,\n  getSubmitTriggerId: (ctx: Ctx) => ctx.ids?.submitTrigger ?? `editable:${ctx.id}:submit`,\n  getCancelTriggerId: (ctx: Ctx) => ctx.ids?.cancelTrigger ?? `editable:${ctx.id}:cancel`,\n  getEditTriggerId: (ctx: Ctx) => ctx.ids?.editTrigger ?? `editable:${ctx.id}:edit`,\n\n  getInputEl: (ctx: Ctx) => dom.getById<HTMLInputElement>(ctx, dom.getInputId(ctx)),\n  getPreviewEl: (ctx: Ctx) => dom.getById<HTMLInputElement>(ctx, dom.getPreviewId(ctx)),\n  getSubmitTriggerEl: (ctx: Ctx) => dom.getById<HTMLButtonElement>(ctx, dom.getSubmitTriggerId(ctx)),\n  getCancelTriggerEl: (ctx: Ctx) => dom.getById<HTMLButtonElement>(ctx, dom.getCancelTriggerId(ctx)),\n  getEditTriggerEl: (ctx: Ctx) => dom.getById<HTMLButtonElement>(ctx, dom.getEditTriggerId(ctx)),\n})\n","import { createMachine, guards } from \"@zag-js/core\"\nimport { contains, raf } from \"@zag-js/dom-query\"\nimport { trackInteractOutside } from \"@zag-js/interact-outside\"\nimport { compact, isEqual } from \"@zag-js/utils\"\nimport { dom } from \"./editable.dom\"\nimport type { MachineContext, MachineState, UserDefinedContext } from \"./editable.types\"\n\nconst { not } = guards\n\nexport function machine(userContext: UserDefinedContext) {\n  const ctx = compact(userContext)\n  return createMachine<MachineContext, MachineState>(\n    {\n      id: \"editable\",\n\n      initial: ctx.startWithEditView ? \"edit\" : \"preview\",\n      entry: ctx.startWithEditView ? [\"focusInput\"] : undefined,\n\n      context: {\n        activationMode: \"focus\",\n        submitMode: \"both\",\n        value: \"\",\n        previousValue: \"\",\n        selectOnFocus: true,\n        ...ctx,\n        translations: {\n          input: \"editable input\",\n          edit: \"edit\",\n          submit: \"submit\",\n          cancel: \"cancel\",\n          ...ctx.translations,\n        },\n      },\n\n      watch: {\n        value: [\"syncInputValue\"],\n      },\n\n      computed: {\n        submitOnEnter: (ctx) => [\"both\", \"enter\"].includes(ctx.submitMode),\n        submitOnBlur: (ctx) => [\"both\", \"blur\"].includes(ctx.submitMode),\n        isInteractive: (ctx) => !(ctx.disabled || ctx.readOnly),\n        isValueEmpty: (ctx) => ctx.value === \"\",\n        isPreviewFocusable: (ctx) => ctx.activationMode === \"focus\",\n      },\n\n      on: {\n        SET_VALUE: {\n          actions: \"setValue\",\n        },\n      },\n\n      states: {\n        preview: {\n          // // https://bugzilla.mozilla.org/show_bug.cgi?id=559561\n          entry: [\"blurInputIfNeeded\"],\n          on: {\n            EDIT: {\n              target: \"edit\",\n              actions: [\"focusInput\", \"invokeOnEdit\"],\n            },\n            DBLCLICK: {\n              guard: \"activateOnDblClick\",\n              target: \"edit\",\n              actions: [\"focusInput\", \"invokeOnEdit\"],\n            },\n            FOCUS: {\n              guard: \"activateOnFocus\",\n              target: \"edit\",\n              actions: [\"setPreviousValue\", \"focusInput\", \"invokeOnEdit\"],\n            },\n          },\n        },\n\n        edit: {\n          activities: [\"trackInteractOutside\"],\n          on: {\n            TYPE: {\n              guard: not(\"isAtMaxLength\"),\n              actions: \"setValue\",\n            },\n            BLUR: [\n              {\n                guard: \"submitOnBlur\",\n                target: \"preview\",\n                actions: [\"restoreFocus\", \"invokeOnSubmit\"],\n              },\n              {\n                target: \"preview\",\n                actions: [\"revertValue\", \"restoreFocus\", \"invokeOnCancel\"],\n              },\n            ],\n            CANCEL: {\n              target: \"preview\",\n              actions: [\"revertValue\", \"restoreFocus\", \"invokeOnCancel\"],\n            },\n            ENTER: {\n              guard: \"submitOnEnter\",\n              target: \"preview\",\n              actions: [\"setPreviousValue\", \"invokeOnSubmit\", \"restoreFocus\"],\n            },\n            SUBMIT: {\n              target: \"preview\",\n              actions: [\"setPreviousValue\", \"invokeOnSubmit\", \"restoreFocus\"],\n            },\n          },\n        },\n      },\n    },\n    {\n      guards: {\n        submitOnBlur: (ctx) => ctx.submitOnBlur,\n        submitOnEnter: (ctx) => ctx.submitOnEnter,\n        isAtMaxLength: (ctx) => ctx.maxLength != null && ctx.value.length === ctx.maxLength,\n        activateOnDblClick: (ctx) => ctx.activationMode === \"dblclick\",\n        activateOnFocus: (ctx) => ctx.activationMode === \"focus\",\n      },\n\n      activities: {\n        trackInteractOutside(ctx, _evt, { send }) {\n          return trackInteractOutside(dom.getInputEl(ctx), {\n            exclude(target) {\n              const ignore = [dom.getCancelTriggerEl(ctx), dom.getSubmitTriggerEl(ctx)]\n              return ignore.some((el) => contains(el, target))\n            },\n            onFocusOutside: ctx.onFocusOutside,\n            onPointerDownOutside: ctx.onPointerDownOutside,\n            onInteractOutside(event) {\n              ctx.onInteractOutside?.(event)\n              if (event.defaultPrevented) return\n              const { focusable } = event.detail\n              send({ type: \"BLUR\", src: \"interact-outside\", focusable })\n            },\n          })\n        },\n      },\n\n      actions: {\n        restoreFocus(ctx, evt) {\n          if (evt.focusable) return\n          raf(() => {\n            const finalEl = ctx.finalFocusEl?.() ?? dom.getEditTriggerEl(ctx)\n            finalEl?.focus({ preventScroll: true })\n          })\n        },\n        focusInput(ctx) {\n          raf(() => {\n            const inputEl = dom.getInputEl(ctx)\n            if (!inputEl) return\n            if (ctx.selectOnFocus) {\n              inputEl.select()\n            } else {\n              inputEl.focus({ preventScroll: true })\n            }\n          })\n        },\n        invokeOnCancel(ctx) {\n          ctx.onValueRevert?.({ value: ctx.previousValue })\n        },\n        invokeOnSubmit(ctx) {\n          ctx.onValueCommit?.({ value: ctx.value })\n        },\n        invokeOnEdit(ctx) {\n          ctx.onEdit?.()\n        },\n        syncInputValue(ctx) {\n          sync.value(ctx)\n        },\n        setValue(ctx, evt) {\n          set.value(ctx, evt.value)\n        },\n        setPreviousValue(ctx) {\n          ctx.previousValue = ctx.value\n        },\n        revertValue(ctx) {\n          set.value(ctx, ctx.previousValue)\n        },\n        blurInputIfNeeded(ctx) {\n          dom.getInputEl(ctx)?.blur()\n        },\n      },\n    },\n  )\n}\n\nconst sync = {\n  value: (ctx: MachineContext) => {\n    const inputEl = dom.getInputEl(ctx)\n    dom.setValue(inputEl, ctx.value)\n  },\n}\n\nconst invoke = {\n  change(ctx: MachineContext) {\n    ctx.onValueChange?.({ value: ctx.value })\n    sync.value(ctx)\n  },\n}\n\nconst set = {\n  value(ctx: MachineContext, value: string) {\n    if (isEqual(ctx.value, value)) return\n    ctx.value = value\n    invoke.change(ctx)\n  },\n}\n"],"mappings":"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","names":["event","ctx"]}
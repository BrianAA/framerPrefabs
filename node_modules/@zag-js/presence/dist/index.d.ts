import { PropTypes, NormalizeProps } from '@zag-js/types';
import * as _zag_js_core from '@zag-js/core';
import { StateMachine } from '@zag-js/core';

interface PublicContext {
    /**
     * Whether the node is present (controlled by the user)
     */
    present: boolean;
    /**
     * Function called when the animation ends in the closed state.
     */
    onExitComplete?: () => void;
}
interface PrivateContext {
    node: HTMLElement | null;
    styles: CSSStyleDeclaration | null;
    prevPresent?: boolean;
    prevAnimationName: string;
}
interface UserDefinedContext extends PublicContext {
}
interface MachineContext extends PublicContext, PrivateContext {
}
interface MachineState {
    value: "mounted" | "unmountSuspended" | "unmounted";
}
type State = StateMachine.State<MachineContext, MachineState>;
type Send = StateMachine.Send<StateMachine.AnyEventObject>;
interface MachineApi {
    /**
     * Whether the node is present in the DOM.
     */
    isPresent: boolean;
    /**
     * Function to set the node (as early as possible)
     */
    setNode(node: HTMLElement | null): void;
}

declare function connect<T extends PropTypes>(state: State, send: Send, normalize: NormalizeProps<T>): MachineApi;

declare function machine(ctx: Partial<UserDefinedContext>): _zag_js_core.Machine<MachineContext, MachineState, _zag_js_core.StateMachine.AnyEventObject>;

export { type MachineApi as Api, type UserDefinedContext as Context, connect, machine };

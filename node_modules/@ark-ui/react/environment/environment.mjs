'use client';
import { jsxs, jsx } from 'react/jsx-runtime';
import { useRef, useMemo } from 'react';
import { runIfFn } from '../run-if-fn.mjs';
import { EnvironmentProvider } from './environment-context.mjs';

const Environment = (props) => {
  const { value, children } = props;
  const ref = useRef(null);
  const getRootNode = useMemo(() => {
    return () => runIfFn(value) ?? ref.current?.ownerDocument ?? document;
  }, [value]);
  const showSpan = !value;
  return /* @__PURE__ */ jsxs(EnvironmentProvider, { value: getRootNode, children: [
    children,
    showSpan && /* @__PURE__ */ jsx("span", { "data-ark-env": "", hidden: true, ref })
  ] });
};

export { Environment };
